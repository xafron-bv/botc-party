name: Project Agent Rules
description: Enforce AGENTS.md workflow for background AI agents in Cursor.
version: 1

steps:
  - id: start_local_server
    when: always
    run: ./server.sh

  - id: tdd_guideline
    when: always
    run: echo "TDD: Start by writing a failing Cypress test for any feature/bugfix, then implement to pass."

  - id: run_tests
    when: pre-commit
    run: ./test.sh

  - id: eslint_fix
    when: pre-commit
    run: npx eslint --fix

  - id: commit_message_guideline
    when: pre-commit
    run: echo "Commits: Use Conventional Commits with subject < 80 chars."

  - id: run_tests_pre_push
    when: pre-push
    run: ./test.sh

  - id: require_green_tests
    when: pre-commit
    run: echo "Require: Do not commit/push if tests fail. Fix and re-run until green."

  - id: static_imports_only
    when: always
    run: echo "Code style: Use only top-level static imports. No dynamic require/import()."
